<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf8">
        <link rel= "stylesheet" type= "text/css" href= "{{ url_for('static',filename='styles/index.css') }}">
        <link rel= "stylesheet" type= "text/css" href= "{{ url_for('static',filename='styles/reg.css') }}">
    </head>
    
    <header>
        <h1 id="header-text"> Wu Flights </h1>
        <div class="login">
            <a id="login-link" href="/staffHome"> Main</a>
            <a id="login-link" href="/logout"> Logout</a>
        </div>
    </header>

    <body>
        {% if error %}
		    <p class="error"><strong>Error:</strong> {{error}}</p>
	    {% endif %}

        <p> Change Flight Status </p> <!-- add check for flight id not for that airline -->
        <form class="search_bar" action="/changeStatus" method="POST"> 
            <label id="search_box"> Flight ID </label> 
            <select name="flight_id" required> 
                <option value="" disabled selected> SELECT </option> 
                {% for flight in flights %} <!-- check to see if flight num is actually submitted -->
                    <option value={{flight['flight_num']}}> {{flight['flight_num']}}: {{flight['depart_city']}} to {{flight['arrival_city']}} on {{flight['depart_date']}} </option> 
                {% endfor %}
            </select>

            <label id="search_box"> Status </label> 
            <select name="status" required> 
                <option value="" disabled selected> SELECT </option> 
                <option> ontime </option> 
                <option> delayed </option> 
            </select>

            <input type="submit" value = Submit />    
        </form>

        <p> Add Flight </p>
        <form class="search_bar" action="/addFlight" method="POST"> 
            <label id="search_box"> Airplane ID </label> 
            <select name="airplane_id" required> 
                <option value="" disabled selected> SELECT </option> 
                {% for airplane in airplanes %}
                    <option> {{airplane['airplane_id']}} </option> 
                {% endfor %}
            </select> 

            <label id="search_box"> Flight ID </label>
            <input type="number" name="flight_id" size="5" required>

            <label id="search_box"> Base Price </label>
            <input type="number" name="price" required> <br \>

            <label id="search_box"> Departure Airport </label>
            <select name="depart_airport" required>
                <option value="" disabled selected> SELECT </option> 
                {% for airport in airports %}
                    <option value=airport['airport_code']> {{airport['airport_name']}} </option> 
                {% endfor %}
            </select> 

            <label id="search_box"> Departure Date </label>
            <input type="date" name="depart_date" required> 

            <label id="search_box"> Departure Time </label>
            <input type="time" name="depart_time" required> <br \>

            <label id="search_box"> Arrival Airport </label>
            <select name="arrival_airport" required>
                <option value="" disabled selected> SELECT </option> 
                {% for airport in airports %}
                    <option value=airport['airport_code']> {{airport['airport_name']}} </option> 
                {% endfor %}
            </select> 

            <label id="search_box"> Arrival Date </label>
            <input type="date" name="arrival_date" required> 

            <label id="search_box"> Arrival Time </label>
            <input type="time" name="arrival_time" required>

            <label id="search_box"> </label>

            <input type="submit" value = Submit />    
        </form>

        <p> Add Airport </p>
        <form class="search_bar" action="/addAirport" method="POST"> 
            <label id="search_box"> Airport Code </label>
            <input type="number" name="code" required> <br \>

            <label id="search_box"> Name </label>
            <input type="text" name="name" required> <br \>

            <label id="search_box"> City </label>
            <input type="text" name="city" required> <br \>

            <label id="search_box"> Country </label>
            <input type="text" name="country" required> <br \>

            <label id="search_box"> Number of Terminals </label>
            <input type="number" name="num_terminals" required> <br \>

            <label id="search_box"> Airport Type </label>
            <select name="airport_type" required>
                <option value="" disabled selected> SELECT </option> 
                <option value="domestic"> Domestic </option>
                <option value="international"> International </option>
                <option value="both"> Both </option>
            </select> 

            <input type="submit" value = Submit />    
        </form>

        <table>
            {% if not airplanes %}
                <th> No Airplanes </th>
            {% else %}
                <th> Airplane ID </th>
                <th> Number of Seats </th>
                <th> Maintenance </th>
                {% for airplane in airplanes %}
                    <tr>
                        <td> {{airplane['airplane_id']}} </td>
                        <td> {{airplane['num_seats']}} </td>
                        {% if airplane['start_date'] == None %}
                            <td> No Maintenance Scheduled </td>
                        {% else %}
                            <td>{{airplane['start_date']}}: {{airplane['start_time']}} to {{airplane['end_date']}}: {{airplane['end_time']}}</td>
                        {% endif %}
                    </tr>
                {% endfor %}
            {% endif %}
        </table>

        <p> Add Airplane </p>
        <form class="search_bar" action="/addAirplane" method="POST"> 
            <label id="search_box"> Airplane ID </label>
            <input type="number" name="id" required> <br \>

            <label id="search_box"> Number of Seats </label>
            <input type="number" name="num_seats" required> <br \>

            <label id="search_box"> Manufacturer </label>
            <input type="text" name="manufacturer" required> <br \>

            <label id="search_box"> Model Number </label>
            <input type="number" name="model_num" required> <br \>

            <label id="search_box"> Manufacture Date </label>
            <input type="date" name="manufact_date" required>

            <input type="submit" value = Submit />    
        </form>

        <p> Schedule Maintenance </p>
        <form class="search_bar" action="/scheduleMaintenance" method="POST"> 
            <label id="search_box"> Airplane ID </label> 
            <select name="airplane_id" required> 
                <option value="" disabled selected> SELECT </option> 
                {% for airplane in airplanes %}
                    <option> {{airplane['airplane_id']}} </option> 
                {% endfor %}
            </select> <br \>

            <label id="search_box"> Start Date </label>
            <input type="date" name="start_date" required> 

            <label id="search_box"> Start Time </label>
            <input type="time" name="start_time" required> <br \>

            <label id="search_box"> End Date </label>
            <input type="date" name="end_date" required> 

            <label id="search_box"> End Time </label>
            <input type="time" name="end_time" required>

            <input type="submit" value = Submit />    
        </form>

        <a id="return" href="/staffHome"> Return to Homepage </a>

        <footer> </footer>
    </body>
</html>